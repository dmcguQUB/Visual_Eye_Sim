<!-- Container -->
<div class="container-fluid d-flex flex-md-row flex-column">
  <!--navbar partial-->
  <div class="d-flex justify-content-left text-center">
   <app-navbar-userscore></app-navbar-userscore>
 </div>
 <!-- Main Content -->
 <div class="main-content-container flex-grow-1">
   <main role="main" class="px-4">
     <div class="card-container title-container">
      <h1 class="title">Case Study Performance Averages</h1>
       <p class="graph-description">Average scores of Eye, Investigations, and Diagnosis tests over selected date range.</p>
       </div>
     

     <div class="chart-container">
       <canvas id="MyChart">{{ chart }}</canvas>
     </div>

     <div class="btn-group mt-3" role="group">
       <button
         type="button"
         class="btn btn-outline-secondary"
         (click)="dateRangeChanged(1)"
       >
         Last 1 Day
       </button>
       <button
         type="button"
         class="btn btn-outline-secondary"
         (click)="dateRangeChanged(3)"
       >
         Last 3 Days
       </button>
       <button
         type="button"
         class="btn btn-outline-secondary"
         (click)="dateRangeChanged(7)"
       >
         Last 7 Days
       </button>
       <button
         type="button"
         class="btn btn-outline-secondary"
         (click)="dateRangeChanged(30)"
       >
         Last 1 Month
       </button>
       <button
         type="button"
         class="btn btn-outline-secondary"
         (click)="dateRangeChanged(180)"
       >
         Last 6 Months
       </button>
       <button
         type="button"
         class="btn btn-outline-secondary"
         (click)="dateRangeChanged(365)"
       >
         Last 1 Year
       </button>
     </div>

     <!--Table-->
     <div class="mt-3">
       <table class="table table-striped">
    <!-- Added columns for Eye Test, Investigations, and Diagnosis percentages -->
    <thead>
      <tr>
          <th scope="col">Case Study</th>
          <th scope="col">Eye Test (%)</th>
          <th scope="col">Investigations Test (%)</th>
          <th scope="col">Diagnosis Test (%)</th>
          <th scope="col">Average Percentage</th>
      </tr>
    </thead>
        
<tbody>
  <tr>
      <th colspan="5">Selected Date Range: {{ dateRange }} day(s)</th>
  </tr>
  <tr *ngFor="let label of labels; index as i">
    <th scope="row">{{ label }}</th>
    <td>{{ eyeTestPercentages[i] | number:"1.2-2" }}%</td>
    <td>{{ investigationsTestPercentages[i] | number:"1.2-2" }}%</td>
    <td>{{ diagnosisTestPercentages[i] | number:"1.2-2" }}%</td>
    <td>{{ (eyeTestPercentages[i] + investigationsTestPercentages[i] + diagnosisTestPercentages[i]) / 3 | number:"1.2-2" }}%</td>
  </tr> 
</tbody>


       </table>
   </div>
   </main>
 </div>
</div>
