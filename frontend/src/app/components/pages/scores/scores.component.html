<!--frontend/src/app/components/pages/scores/scores.component.html-->
<div class="container mt-5">
  <h2>User Scores</h2>
  <table class="table table-bordered" *ngIf="!loading">
    <thead>
      <tr>
        <th>Case Study Number</th>
        <th>Case Study Subject</th>
        <th>Score</th>
        <th>Test Taken At</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let userScore of userScores">
        <!-- Use the getCaseStudyInfo method to display user-friendly Case Study information -->
        <td>{{ getCaseStudyInfo(userScore.caseStudyId).number }}</td>
        <td>{{ getCaseStudyInfo(userScore.caseStudyId).subject }}</td>
        <td>{{ userScore.score }}</td>
        <td>{{ userScore.testTakenAt | date: 'medium' }}</td>
        <td>
          <button (click)="showDetails(userScore)">Show Details</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="loading">Loading...</div>
</div>


<!-- Add a section to show detailed information about the user score -->
<div class="container mt-5" *ngIf="selectedUserScore">
  <h2>User Score Details</h2>
  <p>Case Study ID: {{ selectedUserScore.caseStudyId }}</p>
  <p>Score: {{ selectedUserScore.score }}</p>
  <p>Test Taken At: {{ selectedUserScore.testTakenAt | date: 'medium' }}</p>

  <!-- Add a table to display granular information about each question -->
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Question ID</th>
        <th>User Answer</th>
        <th>Correct</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let answer of selectedUserScore.answers">
        <td>{{ answer.questionId }}</td>
        <td>{{ answer.userAnswer }}</td>
        <td>{{ answer.correct ? 'Yes' : 'No' }}</td>
      </tr>
    </tbody>
  </table>
</div>
